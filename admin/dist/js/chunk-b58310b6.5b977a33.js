(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b58310b6"],{"7adb":function(t,e,a){"use strict";var i=a("f2a1"),s=a.n(i);s.a},d84e:function(t,e,a){"use strict";if(a.d(e,"a",function(){return s}),"localhost"==document.domain)var i=window.location.protocol+"//"+document.domain;else i=window.location.protocol+"//"+document.domain+"/capi";var s={};s.baseUrl=i,s.getactivitylist=i+"/admin/activitylist",s.downloadactivity=i+"/admin/downloadactivity",s.activityinfo=i+"/admin/activityinfo",s.downloadactivityinfo=i+"/admin/downloadactivityinfo",s.downloadactivity=i+"/admin/downloadactivity",s.addactivity=i+"/admin/addactivity",s.addactivity_dc=i+"/admin/addactivity_dc",s.addactivity_rt=i+"/admin/addactivity_rt",s.addactivity_every=i+"/admin/addactivity_every",s.backlist=i+"/admin/backlist",s.addbacklist=i+"/admin/addbacklist",s.delbacklist=i+"/admin/delbacklist",s.startpc_dc=i+"/luckdraw/startpc_dc",s.startpc_rt=i+"/luckdraw/startpc_rt",s.city_list=i+"/admin/city_list",s.city_save=i+"/admin/city_save",s.guest_list=i+"/admin/guest_list",s.designated_room=i+"/admin/designated_room",s.editNext=i+"/admin/editNext",s.getProduct=i+"/admin/getProduct",s.saveProduct=i+"/admin/saveProduct",s.saveProductNew=i+"/admin/saveProductNew",s.addProduct=i+"/admin/addProduct",s.deleteProduct=i+"/admin/deleteProduct",s.updatepic=i+"/admin/updatepic",s.resettingDraw=i+"/admin/resettingDraw",s.saveParze=i+"/admin/saveParze",s.addCity=i+"/admin/addCity",s.deletePrize=i+"/admin/deletePrize",s.addData1=i+"/admin/addData1",s.addData2=i+"/admin/addData2",s.addData3=i+"/admin/addData3",s.addZans=i+"/admin/addZans",s.getData3=i+"/admin/getData3",s.getData4=i+"/admin/getData4",s.getMenus=i+"/admin/getMenus",s.clearData=i+"/admin/clearData",s.getUser=i+"/admin/getUser"},e98d:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("d2-container",[a("div",{staticClass:"messagePromotionAdd mytable"},[a("div",{staticStyle:{padding:"10px"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.getServiceData}},[t._v("刷新数据")]),a("el-button",{attrs:{type:"primary"},on:{click:t.goWebView}},[t._v("跳转展示屏")])],1),a("div",{staticClass:"title"},[t._v("产品信息")]),a("div",{staticClass:"title_flex"},[a("div",{staticClass:"pub_div"},[t._v("订单数：")]),a("el-input",{staticClass:"pub_div",staticStyle:{width:"120px"},attrs:{placeholder:"请输入内容"},model:{value:t.nowData.num,callback:function(e){t.$set(t.nowData,"num",e)},expression:"nowData.num"}}),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisibleb=!0}}},[t._v("新增数据")]),a("el-button",{staticClass:"pub_div",staticStyle:{float:"right"},attrs:{type:"primary",loading:t.SaveStatus},on:{click:t.saveTop}},[t._v("保存数据")])],1),a("div",{staticClass:"product_center"},t._l(t.productList,function(e,i){return a("div",{key:i,staticClass:"product_center_item"},[a("div",{staticStyle:{"text-align":"right"}},[a("i",{staticClass:"el-icon-delete delete_icon",on:{click:function(a){return t.deleteProduct(e.id)}}})]),a("div",{staticClass:"div_pub"},[t._v("产品名称："),a("el-input",{attrs:{placeholder:"请输入内容"},on:{blur:function(a){return t.blur(e.id)}},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"item.name"}})],1),a("div",{staticClass:"div_pub"},[t._v("产品价格1："),a("el-input",{attrs:{placeholder:"请输入内容"},on:{blur:function(a){return t.blur(e.id)}},model:{value:e.percentage,callback:function(a){t.$set(e,"percentage",a)},expression:"item.percentage"}})],1),a("div",{staticClass:"div_pub"},[t._v("产品价格2："),a("el-input",{attrs:{placeholder:"请输入内容"},on:{blur:function(a){return t.blur(e.id)}},model:{value:e.percentage1,callback:function(a){t.$set(e,"percentage1",a)},expression:"item.percentage1"}})],1),a("div",{staticClass:"div_pub"},[t._v("产品图片：")]),a("div",{staticClass:"image_div"},[a("img",{staticClass:"image_show",attrs:{src:e.image}})]),a("el-upload",{attrs:{action:t.updatepic,"on-success":t.picSuccess,data:{id:e.id},"list-type":"picture-card"}},[a("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})])],1)}),0),a("el-dialog",{attrs:{title:"填写数据",visible:t.dialogVisibleb,width:"30%","before-close":t.handleCloseb},on:{"update:visible":function(e){t.dialogVisibleb=e}}},[a("div",[a("div",{staticClass:"div_pub"},[t._v("产品名称："),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.fromb.name,callback:function(e){t.$set(t.fromb,"name",e)},expression:"fromb.name"}})],1),a("div",{staticClass:"div_pub"},[t._v("产品价格1："),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.fromb.percentage,callback:function(e){t.$set(t.fromb,"percentage",e)},expression:"fromb.percentage"}})],1),a("div",{staticClass:"div_pub"},[t._v("产品价格2："),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.fromb.percentage1,callback:function(e){t.$set(t.fromb,"percentage1",e)},expression:"fromb.percentage1"}})],1)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisibleb=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.addNewProduct}},[t._v("确 定")])],1)]),a("div",{staticClass:"title"},[t._v("动销进度")]),a("div",{staticStyle:{padding:"10px","text-align":"center"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("新增数据")]),a("el-button",{attrs:{type:"primary",loading:t.SaveStatus},on:{click:t.saveData}},[t._v("保存数据")])],1),a("div",{staticClass:"data_list"},t._l(t.dataList,function(e,i){return a("div",{key:i,staticClass:"data_list_item"},[a("div",{staticStyle:{"text-align":"right"}},[a("i",{staticClass:"el-icon-delete delete_icon",on:{click:function(a){return t.deleteProduct(e.id)}}})]),a("div",{staticClass:"div_pub"},[t._v("优惠金额："),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.percentage,callback:function(a){t.$set(e,"percentage",a)},expression:"item.percentage"}})],1),a("div",{staticClass:"div_pub"},[t._v("订购数："),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.num,callback:function(a){t.$set(e,"num",a)},expression:"item.num"}})],1)])}),0),a("el-dialog",{attrs:{title:"填写数据",visible:t.dialogVisible,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",[a("div",{staticClass:"div_pub"},[t._v("优惠金额："),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.from.percentage,callback:function(e){t.$set(t.from,"percentage",e)},expression:"from.percentage"}})],1),a("div",{staticClass:"div_pub"},[t._v("订购数："),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.from.num,callback:function(e){t.$set(t.from,"num",e)},expression:"from.num"}})],1)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.addNewData}},[t._v("确 定")])],1)])],1)])},s=[],n=a("d84e"),d={data:function(){return{productList:[],dataList:[],SaveStatus:!1,nowData:{num:0},dialogVisible:!1,dialogVisibleb:!1,disabled:!1,updatepic:n["a"].updatepic,from:{},fromb:{}}},created:function(){this.getServiceData()},methods:{addNewProduct:function(){var t=this;if(this.productList.length>=4)this.$message({message:"产品已超过4个，无法添加",type:"error"});else{var e=this.fromb;e.type=107,this.$http.post(n["a"].addProduct,e).then(function(e){t.dialogVisibleb=!1,200==e.body.code?(t.$message({message:"添加成功",type:"success"}),t.getServiceData()):t.$message({message:"添加失败",type:"error"})},function(){this.$message({message:"添加失败",type:"error"})})}},deleteProduct:function(t){var e=this,a={id:t};this.$http.post(n["a"].deleteProduct,a).then(function(t){e.dialogVisible=!1,200==t.body.code?(e.$message({message:"删除成功",type:"success"}),e.getServiceData()):e.$message({message:"删除失败",type:"error"})},function(){this.$message({message:"删除失败",type:"error"})})},addNewData:function(){var t=this;if(this.dataList.length>=10)this.$message({message:"动销阶段已超过10个，无法添加",type:"error"});else{var e=this.from;e.type=7,this.$http.post(n["a"].addProduct,e).then(function(e){t.dialogVisible=!1,200==e.body.code?(t.$message({message:"添加成功",type:"success"}),t.getServiceData()):t.$message({message:"添加失败",type:"error"})},function(){this.$message({message:"添加失败",type:"error"})})}},handleClose:function(t){this.dialogVisible=!1},handleCloseb:function(t){this.dialogVisibleb=!1},handleRemove:function(t,e){},handlePictureCardPreview:function(t,e){this.productList[e]=t.url},handleDownload:function(t,e){},picSuccess:function(t,e,a){this.getServiceData()},blur:function(t){for(var e=[],a=0;a<this.dataList.length;a++)this.dataList[a].id==t&&e.push(this.dataList[a]);e.length&&this.saveDataPublic(e)},goWebView:function(){var t=window.location.protocol+"//"+document.domain+"/moon4/index.html";window.open(t,"target")},saveData:function(){this.saveDataPublic(this.dataList)},saveDataPublic:function(t){var e=this,a={dataList:t};this.SaveStatus=!0,this.$http.post(n["a"].saveProduct,a).then(function(t){e.SaveStatus=!1,200==t.body.code?(e.$message({message:"保存成功",type:"success"}),e.getServiceData()):e.$message({message:"保存失败",type:"error"})},function(){this.SaveStatus=!1,this.$message({message:"保存失败",type:"error"})})},getServiceData:function(){var t=this;this.loadingStatus=!0;var e="?page=1&page_size=50&type=7&type_a=107";this.$http.get(n["a"].getProduct+e).then(function(e){var a=e.data.data;t.productList=e.data.trends,t.dataList=a,e.data.trends.length>0&&(t.nowData=e.data.trends[0])},function(){this.loadingStatus=!1,this.$message({message:"请求失败",type:"error"})})},saveTop:function(){var t=this,e={dataList:this.productList,orders:this.nowData.num};this.SaveStatus=!0,this.$http.post(n["a"].saveProductNew,e).then(function(e){t.SaveStatus=!1,200==e.body.code?(t.$message({message:"保存成功",type:"success"}),t.getServiceData()):t.$message({message:"保存失败",type:"error"})},function(){this.SaveStatus=!1,this.$message({message:"保存失败",type:"error"})})}}},o=d,c=(a("7adb"),a("2877")),l=function(t){t.options.__source="src/views/yun/shortmessage/moon/moon4.vue"},r=l,u=Object(c["a"])(o,i,s,!1,null,"fb0ecd60",null);"function"===typeof r&&r(u);e["default"]=u.exports},f2a1:function(t,e,a){}}]);
//# sourceMappingURL=chunk-b58310b6.5b977a33.js.map